# TikTok/Instagram Reels Style Feed - Complete Component Documentation\n\n## ðŸŽ¬ Complete Architecture Overview\n\n```\nðŸ“ TikTok-Style Feed Structure\nâ”œâ”€â”€ ðŸ“± app/(newsfeed)/\nâ”‚   â”œâ”€â”€ _layout.tsx          # Navigation layout\nâ”‚   â”œâ”€â”€ index.tsx            # Entry point with demo buttons\nâ”‚   â””â”€â”€ Feed.tsx             # Main reels feed (Full-screen)\nâ”‚\nâ”œâ”€â”€ ðŸ§© components/newsfeed/\nâ”‚   â”œâ”€â”€ PostReelItem.tsx     # Individual post/reel component\nâ”‚   â”œâ”€â”€ ReelsHeader.tsx      # Top header with controls\nâ”‚   â”œâ”€â”€ PostActions.tsx      # Right-side action buttons\nâ”‚   â”œâ”€â”€ PostInfo.tsx         # Bottom content info\nâ”‚   â””â”€â”€ PremiumOverlay.tsx   # Premium content blur overlay\nâ”‚\nâ”œâ”€â”€ ðŸ”§ hooks/\nâ”‚   â””â”€â”€ useNewsfeed.ts       # Data management hook\nâ”‚\nâ”œâ”€â”€ ðŸ“Š constants/\nâ”‚   â””â”€â”€ newsfeed.ts          # Mock data & constants\nâ”‚\nâ””â”€â”€ ðŸ·ï¸ types/\n    â””â”€â”€ newsfeed.ts          # TypeScript definitions\n```\n\n---\n\n## ðŸ“± **1. Feed.tsx - Main TikTok-Style Feed**\n\n**Purpose**: Full-screen vertical scrolling feed like TikTok/Instagram Reels\n\n### Key Features:\n- âœ… **Vertical Pagination**: Each post takes full screen height\n- âœ… **Auto-scroll to specific post**: Via `postId` parameter\n- âœ… **Infinite Loading**: Loads more content as you scroll\n- âœ… **Video Management**: Auto-play/pause based on visibility\n- âœ… **Performance Optimized**: Uses FlatList with optimizations\n\n### Core Logic:\n```tsx\n// Navigation example:\nrouter.push({\n  pathname: '/(newsfeed)/Feed',\n  params: { postId: '123', feedType: 'all' }\n});\n\n// FlatList Configuration:\npagingEnabled={true}                    // Snap to each post\nsnapToInterval={SCREEN_HEIGHT - 100}     // Full screen minus header\nonViewableItemsChanged={handler}         // Track which post is active\ngetItemLayout={(data, index) => ({...})} // Performance optimization\n```\n\n### State Management:\n- `currentIndex`: Tracks which post is currently visible\n- `viewableItems`: Array of currently visible posts\n- `posts`: All posts data from useNewsfeed hook\n\n---\n\n## ðŸŽ­ **2. PostReelItem.tsx - Individual Post Component**\n\n**Purpose**: Single post/reel that fills the entire screen\n\n### Key Features:\n- âœ… **Media Support**: Videos, images, or text-only posts\n- âœ… **Double-tap to Like**: TikTok-style interaction\n- âœ… **Single-tap UI Toggle**: Hide/show overlay elements\n- âœ… **Video Controls**: Auto-play/pause, play indicator\n- âœ… **Premium Blocking**: Blur overlay for premium content\n\n### Interaction Logic:\n```tsx\n// Double-tap detection\nconst handleDoubleTap = () => {\n  const now = Date.now();\n  if (now - lastTap.current < 300) {\n    // Double tap - like post\n    setIsLiked(!isLiked);\n    // Animate heart\n  } else {\n    // Single tap - toggle UI\n    setShowInfo(!showInfo);\n  }\n};\n```\n\n### Media Handling:\n- **Videos**: Uses expo-av Video component with auto-play\n- **Images**: Uses Image component with cover resize mode\n- **Text**: Fallback UI for text-only posts\n\n---\n\n## ðŸŽ¯ **3. PostActions.tsx - Right-Side Action Buttons**\n\n**Purpose**: Vertical stack of action buttons (like TikTok's right sidebar)\n\n### Available Actions:\n- â¤ï¸ **Like**: Toggle like with count display\n- ðŸ’¬ **Comment**: Navigate to comments (blocked for premium)\n- â†—ï¸ **Share**: Native share functionality\n- ðŸ”– **Save**: Premium-only feature\n- ðŸ‘¤ **Profile**: Author profile with follow button\n- â‹¯ **More**: Additional options menu\n\n### Premium Logic:\n```tsx\nconst handleLike = () => {\n  if (isPremiumBlocked) {\n    Alert.alert('Premium Content', 'Upgrade to interact');\n    return;\n  }\n  // Handle like logic\n};\n```\n\n### Count Formatting:\n- Numbers > 1M: \"1.2M\"\n- Numbers > 1K: \"1.5K\" \n- Numbers < 1K: \"245\"\n\n---\n\n## ðŸ“ **4. PostInfo.tsx - Content Information**\n\n**Purpose**: Bottom overlay with post details and author info\n\n### Components:\n- ðŸ‘¤ **Author Info**: Username, verification, timestamp\n- ðŸ“„ **Content**: Expandable text with \"more\" link\n- ðŸ·ï¸ **Hashtags**: Clickable tags (first 3 + count)\n- ðŸŽµ **Music Info**: For video posts\n- ðŸ“Š **Engagement**: Like/comment/share counts\n\n### Text Expansion:\n```tsx\nconst shouldTruncate = post.content.length > 100;\nconst displayContent = isExpanded ? post.content : \n  `${post.content.substring(0, 100)}...`;\n```\n\n---\n\n## âœ¨ **5. PremiumOverlay.tsx - Premium Content Gate**\n\n**Purpose**: Blur overlay for premium-only content\n\n### Visual Effects:\n- ðŸŒ€ **BlurView**: Background blur using expo-blur\n- ðŸŒ‘ **Dark Overlay**: Semi-transparent black layer\n- ðŸ’Ž **Premium Card**: Centered upgrade prompt\n\n### Features:\n- ðŸ”’ **Content Blocking**: Prevents interaction with premium posts\n- ðŸ’° **Upgrade CTA**: Direct link to premium subscription\n- â„¹ï¸ **Benefits List**: Shows what premium includes\n- â­ï¸ **Skip Option**: \"Maybe later\" for non-intrusive UX\n\n---\n\n## ðŸŽ›ï¸ **6. ReelsHeader.tsx - Top Navigation**\n\n**Purpose**: Minimal header overlay on top of content\n\n### Elements:\n- âŒ **Close Button**: Navigate back to previous screen\n- ðŸ“Š **Progress Bar**: Shows position in feed (1/25)\n- âš™ï¸ **More Options**: Additional controls menu\n- ðŸ“ˆ **Progress Indicator**: Visual progress through posts\n\n### Styling:\n- **Transparent Background**: Overlays content without blocking\n- **Safe Area**: Accounts for device notches/status bar\n- **Dark Theme**: White text/icons on transparent background\n\n---\n\n## ðŸŽ£ **7. useNewsfeed.ts - Data Management Hook**\n\n**Purpose**: Centralized data fetching and state management\n\n### Features:\n- ðŸ“¥ **Initial Load**: Loads first batch of posts\n- ðŸ”„ **Pull to Refresh**: Reload posts from top\n- â™¾ï¸ **Infinite Scroll**: Load more posts at bottom\n- ðŸŽ¯ **Filter Support**: Filter by type (all/premium/trending)\n- ðŸ“± **Optimistic Updates**: Immediate UI feedback\n\n### API Integration Ready:\n```tsx\nconst loadPosts = async (reset = true) => {\n  // Replace with your API call:\n  // const response = await fetch('/api/posts');\n  // const data = await response.json();\n  \n  // Currently uses MOCK_POSTS for demo\n};\n```\n\n---\n\n## ðŸš€ **Navigation & Usage Examples**\n\n### Open Feed from Any Screen:\n```tsx\nimport { router } from 'expo-router';\n\n// Open general feed\nrouter.push('/(newsfeed)/Feed');\n\n// Open to specific post\nrouter.push({\n  pathname: '/(newsfeed)/Feed',\n  params: { postId: '123' }\n});\n\n// Open premium-only feed\nrouter.push({\n  pathname: '/(newsfeed)/Feed', \n  params: { feedType: 'premium' }\n});\n```\n\n### From PostCard Component:\n```tsx\n<TouchableOpacity \n  onPress={() => router.push({\n    pathname: '/(newsfeed)/Feed',\n    params: { postId: post.id }\n  })}\n>\n  {/* Post preview */}\n</TouchableOpacity>\n```\n\n---\n\n## âš¡ **Performance Optimizations**\n\n### FlatList Optimizations:\n- `removeClippedSubviews={true}`: Unmount off-screen items\n- `maxToRenderPerBatch={3}`: Render 3 items per batch\n- `windowSize={5}`: Keep 5 screen heights in memory\n- `initialNumToRender={2}`: Start with 2 items\n- `getItemLayout`: Pre-calculated item dimensions\n\n### Video Management:\n- Auto-pause videos when scrolled away\n- Pre-load adjacent videos for smooth scrolling\n- Memory management for multiple video instances\n\n### State Management:\n- Debounced scroll events\n- Optimistic updates for likes/comments\n- Lazy loading of user profiles\n\n---\n\n## ðŸŽ¨ **Styling & Theming**\n\n### Colors:\n- **Background**: Black (`bg-black`)\n- **Text**: White (`text-white`)\n- **Premium**: Gold gradient (`#FFD700` â†’ `#FFA500`)\n- **Actions**: Semi-transparent backgrounds (`bg-black/30`)\n\n### Responsive Design:\n- Uses `Dimensions.get('window')` for screen size\n- Adapts to different aspect ratios\n- Safe area handling for notched devices\n\n---\n\n## ðŸ”§ **Required Dependencies**\n\n```bash\nnpm install expo-av expo-blur expo-linear-gradient\n```\n\n### Import Requirements:\n- `expo-av`: Video playback\n- `expo-blur`: Premium content blur effect\n- `expo-linear-gradient`: Premium styling\n- `react-native-safe-area-context`: Safe area handling\n\n---\n\n## ðŸŽ¯ **Key Differences from Traditional Feed**\n\n| Feature | Traditional Feed | TikTok-Style Feed |\n|---------|------------------|-------------------|\n| **Layout** | List of cards | Full-screen posts |\n| **Navigation** | Tap to modal | Vertical scroll |\n| **Video** | Tap to play | Auto-play |\n| **Interaction** | Button taps | Gestures (double-tap) |\n| **UI** | Always visible | Toggle on/off |\n| **Focus** | Multiple posts | One post at a time |\n| **Immersion** | Partial | Complete |\n\n---\n\n## ðŸ”„ **State Flow Diagram**\n\n```\nFeed.tsx\nâ”œâ”€â”€ useNewsfeed() â†’ Posts Data\nâ”œâ”€â”€ FlatList â†’ PostReelItem[]\nâ”‚\nPostReelItem.tsx\nâ”œâ”€â”€ Video/Image Display\nâ”œâ”€â”€ Premium Check â†’ PremiumOverlay?\nâ”œâ”€â”€ Gesture Handling â†’ Like/UI Toggle\nâ”œâ”€â”€ PostInfo (Bottom)\nâ””â”€â”€ PostActions (Right)\n\nUser Interactions:\nâ”œâ”€â”€ Double Tap â†’ Like Animation\nâ”œâ”€â”€ Single Tap â†’ Toggle UI\nâ”œâ”€â”€ Scroll â†’ Change Active Post\nâ”œâ”€â”€ Pull â†’ Refresh Feed\nâ””â”€â”€ Reach End â†’ Load More\n```\n\nThis complete system provides a TikTok/Instagram Reels experience with premium user management, optimized performance, and smooth interactions! ðŸŽ¬âœ¨"